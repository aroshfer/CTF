<!doctype html>
<html>
  <body>
    <h2>Upload profile picture</h2>
    <form id="f" enctype="multipart/form-data" method="post" action="/upload">
      <input type="file" name="file" id="file">
      <input type="submit" value="Upload">
    </form>
    <script>
      document.getElementById('f').addEventListener('submit', e => {
        const file = document.getElementById('file').files[0];
        if (!file) { e.preventDefault(); alert('select file'); return; }
        const ok = ['image/png','image/jpeg','image/gif'].includes(file.type);
        if (!ok) { e.preventDefault(); alert('client side: bad mime'); return; }
      });
    </script>
  </body>
</html>
